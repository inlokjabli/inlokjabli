<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loker Jawa Bali</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Coming+Soon&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- Header -->
  {% include 'header.html' %}

  <!-- Navbar (dengan kolom pencarian + tombol) -->
  {% include 'navbar.html' %}

  <!-- Konten utama -->
  <main>
    <section class="job-list">
      <div class="grid" id="job-grid">
        {{ job_cards }}
      </div>
    </section>
  </main>

  <!-- Footer -->
  {% include 'footer.html' %}

  <!-- Script pencarian berbasis query string -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const query = (urlParams.get("q") || "").toLowerCase();
      const cards = document.querySelectorAll(".card");

      if (query) {
        const input = document.getElementById("search");
        if (input) input.value = query;

        cards.forEach(card => {
          const title = card.getAttribute("data-title") || "";
          const company = card.getAttribute("data-company") || "";
          const location = card.getAttribute("data-location") || "";
          const match = title.includes(query) || company.includes(query) || location.includes(query);
          card.classList.toggle("hidden", !match);
        });
      }
    });
  </script>

</body>
</html>
